id: github-login-error
title: GitHub login with invalid credentials shows error
category: foundation

description: |
  Verifies GitHub login form accepts input and shows proper error
  message when invalid credentials are submitted.

  This is a foundation case for authentication flows.
  More complex flows (like "login then create repo") would build on this.

parameters:
  base_url: https://github.com

steps:
  - desc: Navigate to login page
    commands:
      - agent-browser open {{env.base_url}}/login --headed
      - agent-browser wait 2000
    expect:
      - element_visible: {{role: heading, name: "Sign in to GitHub"}}
      - element_visible: {{role: textbox, name: "Username or email address"}}
      - element_visible: {{role: textbox, name: "Password"}}
      - element_visible: {{role: button, name: "Sign in"}}

  - desc: Fill form with invalid credentials
    commands:
      - agent-browser fill {{role: textbox, name: "Username or email address"}} "test-invalid-user"
      - agent-browser fill {{role: textbox, name: "Password"}} "test-invalid-pass"
    expect:
      - element_visible: {{role: textbox, name: "Username or email address"}}

  - desc: Submit and verify error appears
    commands:
      - agent-browser click {{role: button, name: "Sign in"}}
      - agent-browser wait 3000
    expect:
      # Error message should appear
      - element_visible: {{role: alert}}
      # Or check for specific text
      - text_contains: "Incorrect username or password"

exploration:
  status: validated
  session_log: |
    2026-02-01: Recorded on github.com
    - Login form has accessible elements
    - Error handling shows alert role with clear message
    - Refs change after error appears (new dismiss button)
    - Semantic selectors remain stable across ref changes
