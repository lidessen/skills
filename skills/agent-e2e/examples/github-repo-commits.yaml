id: github-repo-commits
title: View repository commit history
category: flow

description: |
  Navigate to a popular repository and view its commit history.

  Demonstrates:
  - Repository page navigation
  - Finding dynamic elements (commit count varies)
  - Commit history verification
  - Data extraction (commit SHA, author, message)

parameters:
  base_url: https://github.com
  owner: facebook
  repo: react

steps:
  - desc: Navigate to repository
    commands:
      - agent-browser open {{env.base_url}}/{{env.owner}}/{{env.repo}} --headed
      - agent-browser wait 2000
    expect:
      - element_visible: {{role: heading, name: /facebook\/react/}}
      - element_visible: {{role: link, name: /Commits$/}}

  - desc: Click commits link
    commands:
      - agent-browser click {{role: link, name: /\d+.* Commits/}}
      - agent-browser wait 2000
    expect:
      - url_contains: /commits
      - element_visible: {{role: heading, name: /Commits/}}

  - desc: Verify commit list structure
    commands:
      - agent-browser snapshot --json
    expect:
      # Each commit should have key elements
      - element_visible: {{role: button, name: /Verified/}}
      - element_visible: {{role: link, name: /^[a-f0-9]{7}$/}}  # SHA link
      - element_visible: {{role: link, name: /commits by/}}     # Author

exploration:
  status: validated
  session_log: |
    2026-02-01: Recorded on github.com/facebook/react
    - Commit count link has dynamic number (21,316+ commits)
    - Each commit row has: title, author, SHA, Verified badge
    - Semantic selectors work well for dynamic content
    - Direct navigation avoids rate limiting
